package com.sulfurengine;

import java.util.ArrayList;
import java.util.List;

public class Entity {
	public String name;
	public Transform transform;
	
	private List<Script> behaviours;
	
	public Entity(String name, Transform t) {
		this.name = name;
		this.transform = t;
		this.behaviours = new ArrayList<>();
	}
	
	 public <T extends Script> T getScript(Class<T> ScriptClass) {
	        for (Script c : behaviours) {
	            if (ScriptClass.isAssignableFrom(c.getClass())) {
	                try {
	                    return ScriptClass.cast(c);
	                } catch (ClassCastException e) {
	                    e.printStackTrace();
	                    assert false : "Error: Casting Script.";
	                }
	            }
	        }

	        return null;
	    }

	    public <T extends Script> void removeScript(Class<T> ScriptClass) {
	        for (int i=0; i < behaviours.size(); i++) {
	            Script s = behaviours.get(i);
	            if (ScriptClass.isAssignableFrom(s.getClass())) {
	                behaviours.remove(i);
	                return;
	            }
	        }
	    }

	    public void addScript(Script s) {
	        this.behaviours.add(s);
	        s.parent = this;
	    }a
	
	public void start() {
		for(Script s : behaviours) {
			s.start();
		}
	}
	
	public void update(float dt) {
		for(Script s : behaviours) {
			s.update(dt);
		}
	}
}
