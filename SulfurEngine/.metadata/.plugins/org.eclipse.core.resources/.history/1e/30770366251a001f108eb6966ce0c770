import com.sulfurengine.behaviorscripts.Spriterenderer;
import com.sulfurengine.ecs.Script;
import com.sulfurengine.io.Input;
import com.sulfurengine.renderer.DirtyFlag;

public class PlayerMovement extends Script {

	public float speed = 100f;
	
	@Override
	public void start() {		
	}

	@Override
	public void update(float dt) {
		float x = Input.getAxisHorizontal() * speed * dt;
		float y = Input.getAxisVertical() * speed * dt;
		
		parent.transform.pos.add(x, y);
		
		Spriterenderer spr = parent.getScript(Spriterenderer.class);
		if(spr != null) {
		    if (x > 0) {
	            spr.flipX = false; // Don't flip horizontally if moving right
	        } else if (x < 0) {
	            spr.flipX = true; // Flip horizontally if moving left
	        }		
		   }
		
		if(x != 0 || y != 0) DirtyFlag.dirty = true;
		
	}

}
